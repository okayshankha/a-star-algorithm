var canvasW=600;var canvasH=600;var rows=100;var cols=100;var current,currentIndex;var start=[0,0];var end=[rows-1,cols-1];var tentative_gScore;var neighbour;var grid=new Array(rows);var OpenSet=new Array();var ClosedSet=new Array();function setup(){createCanvas(canvasW,canvasH);print("A*");for(var b=0;b<rows;b++){grid[b]=new Array(cols)}for(var b=0;b<rows;b++){for(var a=0;a<cols;a++){grid[b][a]=new cell(b,a)}}MakeObstracles(grid);GetNeighbours(grid);GetHeuristics(grid);OpenSet.push(start)}function draw(){if(OpenSet.length===0){print("Finished!");alert("Impossible to reach!");noLoop()}else{Calc_All_fValue();currentIndex=MinimumFvalueElement();current=OpenSet[currentIndex];if(!OpenSet[currentIndex].Compare(end)){reconstruct_path();print("Finished!");background(0);DrawGrids(grid);noLoop()}OpenSet.Remove(current);grid[current[0]][current[1]].isAnObstrucle=-99;ClosedSet.push(current);neighbour=grid[current[0]][current[1]].neighbour;for(var a=0;a<neighbour.length;a++){if(!searchForArray(ClosedSet,neighbour[a])&&(grid[neighbour[a][0]][neighbour[a][1]].isAnObstrucle!=1)){tentative_gScore=1+grid[current[0]][current[1]].g;if(!searchForArray(OpenSet,neighbour[a])){OpenSet.push(neighbour[a])}else{if(tentative_gScore>=grid[neighbour[a][0]][neighbour[a][1]]){}}grid[neighbour[a][0]][neighbour[a][1]].cameFrom=current;grid[neighbour[a][0]][neighbour[a][1]].g=tentative_gScore;grid[neighbour[a][0]][neighbour[a][1]].f=grid[neighbour[a][0]][neighbour[a][1]].g+grid[neighbour[a][0]][neighbour[a][1]].h}}}background(0);DrawGrids(grid)};